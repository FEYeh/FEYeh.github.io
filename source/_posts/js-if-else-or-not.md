title: If...Else, or not
categories:
  - å‰ç«¯
date: 2018-07-28 14:07:00
tags: å‰ç«¯

---

# å‰è¨€
æˆ–è®¸ç¼–ç¨‹ä¸­æœ€æœ€ç»å…¸çš„ç‰¹æ€§å°±æ˜¯æ¡ä»¶è¯­å¥äº†ã€‚ä½†å½“æˆ‘å¼€å§‹å›é¿å®ƒï¼Œæˆ‘å‘ç°æˆ‘è‡ªå·±å†™å‡ºæ¥çš„ä»£ç æ›´åŠ åˆç†ä¸”æ•´æ´ã€‚

å›é¿æ¡ä»¶è¯­å¥çš„åŠæ³•å°±æ˜¯é™ä½åœˆå¤æ‚åº¦ï¼ï¼ˆåœˆå¤æ‚åº¦å°±ä¸èµ˜è¿°äº†ï¼Œå¤§å®¶çœ‹å‚è€ƒæ–‡çŒ®å³å¯ï¼‰

æˆ‘ä»¬åœ¨Reacté¡¹ç›®ä¸­ï¼Œé‡åˆ°ç‰¹åˆ«å¤šçš„If...Elseè¯­å¥ã€‚

è€Œè‡ªä»å¼•å…¥äº†Eslintåœˆå¤æ‚åº¦æ£€æµ‹ï¼Œç¡®å®é‡æ„äº†ç‰¹åˆ«å¤šçš„If...Elseã€‚

é‡æ„åä»£ç çš„å¯è¯»æ€§æ›´å¥½äº†ï¼Œä¹Ÿæ›´åŠ åˆç†ã€‚

å› æ­¤ä¹Ÿå¯¹æ­¤ååˆ†çƒ­è¡·ï¼Œæˆ‘æƒ³åœˆå¤æ‚åº¦è¿‡é«˜è¯´æ˜ä½ çš„ä»£ç å¹¶ä¸å¥åº·ï¼Œæ˜¯æ—¶å€™å¯¹å®ƒè¿›è¡Œä½“æ£€å’Œé‡æ„äº†ã€‚

# å®æˆ˜ç»éªŒ
å½“æˆ‘åœ¨Code Reviewæ—¶çœ‹åˆ°å¾ˆå¤šæ¡ä»¶è¯­å¥ï¼Œè¿™æ—¶åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘æ˜¯è¿™æ ·è€ƒè™‘çš„ï¼š

è¿™ä¸ªåŠŸèƒ½å®é™…ä¸Šæ˜¯åœ¨åšä¸åŒçš„äº‹æƒ…ï¼Œè€Œåº”è¯¥åˆ†æˆä¸åŒçš„åŠŸèƒ½å—ï¼Ÿ

æ˜¯å¦ç¡®å®æœ‰å¿…è¦åœ¨è¿™ä¸ªåŠŸèƒ½ä¸­æ£€æŸ¥æ­¤æ¡ä»¶ï¼Œè¿˜æ˜¯åº”è¯¥ç”±å…¶ä»–åœ°æ–¹è´Ÿè´£å‘¢ï¼Ÿ

å¯ä»¥ç”¨æ›´æ˜“è¯»çš„æ–¹å¼å®Œæˆå—ï¼Ÿæœ‰ä¸åŒçš„æ¨¡å¼å¯ä»¥æ›¿æ¢æ¡ä»¶ï¼Œæˆ‘æœ€å–œæ¬¢çš„æ¨¡å¼ä¹‹ä¸€æ˜¯å¯¹è±¡æ˜ å°„æ¨¡å¼ã€‚

å¦‚æœæˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ¡ä»¶ã€‚æˆ‘ä¼šåˆ é™¤Elseï¼Œåªä¿ç•™Ifå’Œé»˜è®¤æƒ…å†µã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥ç ”ç©¶ä¸‹ä¸€äº›å¤„ç†ä¸åŒç±»å‹æ¡ä»¶è¯­å¥çš„åŠæ³•å§ï¼

## ç§»é™¤Else
è¿™æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„åŠæ³•ï¼Œä½†å¾ˆå®ç”¨ï¼š

```js
if (red) {
  return true;
} else if (blue) {
  return true;
} else {
  return false;
}
```
é‡æ„æˆè¿™æ ·ï¼š

```js
if (red || blue) {
 return true;
}
return false;
```
æˆ‘å–œæ¬¢ç¬¬äºŒç§æ–¹å¼ï¼ŒåŸå› æœ‰äºŒï¼š

æœ‰ä¸€ä¸ªdefaultè¯­å¥ï¼Œå¦‚æœifè¯­å¥ä¸è¢«æ»¡è¶³ï¼Œåˆ™å¯ä»¥å¾ˆæ¸…æ¥šçš„çŸ¥é“è¿”å›ç»“æœ

åŠŸèƒ½ä¸€æ ·ï¼Œä½†ä»£ç å°‘ï¼Œå¯è¯»æ€§å¼º

## ç»„åˆ
å¦‚æœä½ ç†è§£ä½ çš„åŠŸèƒ½ç¡®å®æ˜¯åšç€ä¸åŒçš„äº‹æƒ…ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¾ˆæ£’çš„æ¨¡å¼â€”â€”ç»„åˆã€‚

ä½ éœ€è¦å°†è¿™ä¸ªåŠŸèƒ½åˆ†æˆæ›´å°çš„ã€æ›´ç»†è‡´çš„åŠŸèƒ½ï¼Œç„¶åå°†ä»–ä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚

è¿™æ ·çš„è¯ï¼Œä½ å¯ä»¥è‡ªå·±åˆ›å»ºä¸€ç»„å¯åœ¨åº”ç”¨çš„ä¸åŒåœ°æ–¹å»ä½¿ç”¨çš„é€šç”¨åŠŸèƒ½ã€‚

å…‰è¯´ä¸ç»ƒå˜´æŠŠæˆï¼Œè¿™å°±æ¥ä¸ªæ —å­ğŸŒ°ï¼šå‡å¦‚æˆ‘ä»¬æœ‰ä¸ªéœ€æ±‚ï¼Œè¦è·å–å¹´é¾„è¶…è¿‡30ä¸”æ€€å­•ç€çš„å¥³å‘˜å·¥

æˆ‘ä»¬çš„ä»£ç ä¼šé•¿è¿™æ ·ï¼š

ä»£ç å—
JavaScript
import { flow } from 'lodash';
const femaleEmployeesOverThirtyAndPregnant = flow(
  getFemales,
  getEmployeesOverThirty,
  getEmployeesPregnant,
)(employees);
æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œä¸Šè¿°çš„æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯å¯ä»¥åœ¨ä¸åŒåœ°æ–¹å»å¤ç”¨çš„ã€‚

## å¯¹è±¡æ˜ å°„
è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„æ¨¡å¼ã€‚

å®ƒç¡®å®å¯ä»¥åœ¨å¾ˆå¤šä¸åŒæƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¸ç®¡å‰ç«¯ç¼–ç¨‹è¿˜æ˜¯åç«¯ç¼–ç¨‹ã€‚

æœ€å¤§çš„å¥½å¤„å½“ç„¶æ˜¯å®ƒå¤Ÿç®€å•ï¼Œå¯è¯»æ€§å¼ºã€‚

å½“æˆ‘ä½¿ç”¨å®ƒæ—¶ï¼Œæˆ‘æ„Ÿè§‰æˆ‘ä¸æ˜¯åœ¨å†™ä»£ç è€Œæ›´åƒæ˜¯åœ¨å†™è¯´æ˜æ–‡æ¡£ã€‚

ä¸Šèœï¼š2.1çš„ä»£ç æ¢äº†ä¸ªæ–°è¡£è£³ğŸ‘—

```js
const colors = {
  red: true,
  blue: true,
  default: false,
 };
const colorMapper = color => colors[color] || colors.default;
const color = colorMapper(item.color);
```
å®ƒæ˜¯è¿™æ ·å·¥ä½œçš„ï¼š

* ä¸€ä¸ªå…·ä½“è¯´æ˜ç»“æœçš„å¯¹è±¡
* ä¸€ä¸ªæ˜ å°„å‡½æ•°

æœ‰ä¸€ä¸ªdefaultç»“æœæ˜¯ååˆ†å¥½çš„ã€‚å› ä¸ºå¦‚æœæˆ‘ä»¬æ²¡ä¼ å‚æ•°æˆ–å‚æ•°ä¸ºç©ºï¼Œè¿™ä¸ªæ–¹æ³•ä»ç„¶å¯ä»¥å·¥ä½œã€‚

æ¯”å¦‚æˆ‘ä»¬è¿™æ ·ä½¿ç”¨ï¼šcolorMapper(â€˜greenâ€™)ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªé»˜è®¤å€¼ä¸ºfalseçš„ç»“æœã€‚ä½†åé¢æˆ‘ä»¬å¯ä»¥åœ¨ä¹‹åæ·»åŠ æ–°çš„æ•°æ®è¿›å»ï¼Œååˆ†æ–¹ä¾¿ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä½¿ç”¨switchè¯­å¥æ¥å¾—åˆ°åŒæ ·çš„ç»“æœï¼Œä½†è¿™æ ·å¹¶ä¸èƒ½é™ä½åœˆå¤æ‚åº¦ã€‚ç›¸æ¯”switchè¯­å¥ï¼Œå¯¹è±¡æ˜ å°„æ¨¡å¼æ›´åŠ çº¯å‡€è€Œä¼˜é›…ã€‚

## å¯¹è±¡æ˜ å°„å’ŒReact
åœ¨Reactä¸­ï¼Œè¿™ä¸ªæ¨¡å¼çœŸçš„å¾ˆæ£’ã€‚

åˆæ¥ä¸€é¢—ä¾‹å­ğŸŒ°ï¼šå‡è®¾æˆ‘ä»¬æƒ³è¦å°†ä¸€ä¸ªæ•°ç»„æ¸²æŸ“å‡ºä¸åŒçš„ç»„ä»¶ã€‚æˆ‘ä»¬çš„æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š

```js
const items = [{
 type: â€˜heroâ€™,
 content: : {â€¦},
}, {
 type: 'text',
 content: : {â€¦},
}, {
 type: 'image_and_text',
 content: : {â€¦},
}, {
 type: 'text',
 content: : {â€¦},
}, {
 type: 'call_to_action',
 content: : {â€¦},
}];
```
æ•°ç»„ä¸­æ¯ä¸ªå¯¹è±¡éƒ½æœ‰typeå’Œcontentå±æ€§ã€‚

æˆ‘ä»¬å†™ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œæ¯ä¸€ä¸ªkeyå¯¹åº”ä¸Šè¿°å¯¹è±¡ä¸­çš„typeï¼Œå€¼ä¸ºä¸€ä¸ªç‰¹å®šçš„ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶ï¼Œåªæ¥å—ä¸€ä¸ªå±æ€§ä¸ºcontentã€‚å¦‚ä¸‹ï¼š

```js
const components = {
 hero: HeroComponent,
 text: TextComponent,
 image_and_text: ImageAndTextComponent,
 call_to_action: CallToActionComponent,
 default: null,
};
const componentMapper = type => 
components[type] || components.default;
```
ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨Reactåº”ç”¨ä¸­è¿™æ ·ç”¨äº†ï¼š

```js
import react from â€˜reactâ€™;
const RenderItems = props => {
 
 const componentList = props.items((item, index) => {
   const Component = componentMapper(item.type);
   return <Component content={item.content} />
 };
 return (
  <div>
   {componentList}
  </div>
 )
};
```
è¿™é‡Œçš„ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„å†…å®¹æ¥è‡ªå¤–éƒ¨æºï¼Œå¹¶ä¸”æœ‰äººæ·»åŠ äº†æ–°æ¨¡å—ã€‚å®ƒå°†åªæ¸²æŸ“å‡ºnullï¼Œå¹¶ä¸”ä»€ä¹ˆéƒ½ä¸ä¼šä¸­æ–­ã€‚æˆ‘ä»¬ç¨åå¯ä»¥åœ¨æˆ‘ä»¬çš„æ˜ å°„å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªæ–°ç»„ä»¶ã€‚

# åè®°
å¯èƒ½æœ‰æ›´å¤šä¸åŒçš„æ¨¡å¼å’Œæ–¹æ³•å¯ç”¨äºå¯¹æŠ—ä»£ç ä¸­çš„Ifså’ŒElsesã€‚

ä½†è¿™åªæ˜¯æˆ‘å‘ç°æœ€æœ‰ç”¨çš„å‡ ç§æ–¹æ³•ã€‚

å¦‚æœä½ å‘ç°æ–°çš„ï¼Œè¿˜è¯·ä¸åèµæ•™ï¼ï¼ï¼

# å‚è€ƒæ–‡çŒ®

[become-a-functional-javascript-hero](https://medium.com/front-end-hacking/become-a-functional-javascript-hero-945e72c15bff)

[lodash/flow](https://lodash.com/docs/4.17.10#flow)
